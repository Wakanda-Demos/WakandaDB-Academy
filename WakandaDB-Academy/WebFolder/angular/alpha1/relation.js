angular.module('playRelationAngular', ['wakConnectorModule']);function PlayRelationController($scope, wakConnectorService) {    // Create a proxy of the server model	wakConnectorService.init('Country,Company').then(function () {	    PlayRelationControllerReady($scope, wakConnectorService);	});}function PlayRelationControllerReady($scope, $wakanda) {		var ds = $wakanda.getDatastore();    ds.Country.$find({}).then(function(event) {        $scope.countries = event.result;        $scope.currentCountry = event.result[0];    });    $scope.switchCurrentCountry = function switchCurrentCountry(country) {        $scope.currentCountry = country;    }    $scope.switchCurrentCompany = function switchCurrentCompany(company) {        $scope.currentCompany = company;    }        $scope.$watch('currentCountry', function (newCountry, previousCountry) {        if (!newCountry) {            return;        }        if (previousCountry) {            previousCountry.selected = false;        }        newCountry.selected = true;        ds.Company.$find({filter: 'country.ID = ' + newCountry.ID}).then(function(event) {            $scope.companies = event.result;            $scope.currentCompany = event.result[0];        });    });        $scope.$watch('currentCompany', function (newCompany, previousCompany) {        if (!newCompany) {            return;        }        if (previousCompany) {            previousCompany.selected = false;        }        newCompany.selected = true;    });    }